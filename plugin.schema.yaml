---
type: map
desc: Describes a plugin that is part of an Outlyer integration.
mapping:
  "type":
    type: str
    desc: Sets the type and expected output format of the plugin.
    required: no
    enum: ["native", "nagios"]
    default: "native"
  "requirements":
    type: seq
    desc: List of Python package dependencies in pip format (e.g. "requests==2.18.4").
    required: no
    sequence:
      - type: str
  "interval": &interval
    type: int
    desc: How often the plugin should be executed, in seconds.
    required: no
    range: { min: 10, max: 86400 }
    default: 30
  "deployments":
    type: seq
    required: yes
    desc: List of deployment descriptors to which this plugin should be automatically applied.
    sequence:
      - type: map
        mapping:
          "title":
            type: str
            required: no
            desc: Name for this descriptor.
          "interval": *interval
          "selector":
            type: seq
            required: yes
            sequence:
              - type: map
                mapping:
                  =:
                    type: str
                    required: yes
            desc: List of labels to use for selecting the matching hosts.
          "settings":
            type: map
            required: no
            desc: List of plugin-specific settings to apply (e.g. username, password, URL, etc).
            mapping:
              =:
                type: scalar
                required: yes
  "settings":
    type: seq
    required: no
    desc: List of settings required by the plugin.
    sequence:
      - type: map
        required: yes
        mapping:
          "name":
            type: str
            required: yes
            desc: Field name
          "description":
            type: str
            required: yes
            desc: Description of the field
          "type":
            type: str
            required: yes
            enum: ["string", "password", "url", "int", "float"]
            desc: Datatype of the field
          "default":
            type: any
            required: no
            desc: Default value for this field if nothing is entered
